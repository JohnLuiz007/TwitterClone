<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TwitterClone</title>
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" 
    crossorigin="anonymous" referrerpolicy="no-referrer" />

    <link rel="stylesheet" href="pageStyle.css">
</head>
<body>

<!-- Start Sidebar -->
<div class="sidebar">
<<<<<<< HEAD
=======
    <i class="fab fa-twitter"></i>
>>>>>>> 05ed02df67fbcd67a6d9e1816a2191a5593e2ac0
    <a href="try.html" class="sidebarOption active">
        <span class="material-symbols-outlined">home</span>
        <h2>Home</h2>
    </a>
    <a href="#" class="sidebarOption">
        <span class="material-symbols-outlined">search</span>
        <h2>Explore</h2>
    </a>
    <a href="#" class="sidebarOption">
        <span class="material-symbols-outlined">notifications_none</span>
        <h2>Notifications</h2>
    </a>
    <a href="profile.html" class="sidebarOption">
        <span class="material-symbols-outlined">perm_identity</span>
        <h2>Profile</h2>
    </a>

    <footer>
        <p>Terms of Service</p>
        <p>Privacy Policy</p>
        <p>Cookie Policy</p>
        <p>Â© 2024 Mapua Gang, Inc.</p>
    </footer>
</div>
<!-- End Sidebar -->

<!-- Start Feed -->
<div class="feed">
    <div class="feed__header">
        <!-- Feed header content -->
    </div>
    <div class="tweetBoxContainer">
        <!-- Start Tweetbox -->
        <div class="tweetBox">
            <form id="tweetForm">
                <div class="shorter-border">
                    <div class="tweetbox__input">
                        <input type="text" id="tweetContent" placeholder="What's on your mind?" />
                    </div>
                </div>
                <button type="button" onclick="postTweet()" class="tweetBox__tweetButton">Post</button>
            </form>
        </div>
    </div>
    <!-- End Tweetbox -->

    <!-- Start Post -->
    <div id="container">
        <!-- The tweets will be dynamically added here -->
    </div>
</div>
<!-- End Feed -->

<!-- Start Widget -->
<div class="widgets">
    <!-- Widget content as you had it -->
</div>
<!-- End Widget -->

<script>
    // Load existing tweets from the server
    window.addEventListener('load', () => {
        fetch("http://localhost:3000/api/docs")
            .then(response => response.json())
            .then(data => {
                const container = document.getElementById("container");

                data.posts.forEach(postContent => {
                    const post = document.createElement("div");
                    post.classList.add("post");
                    post.innerHTML = `
                        <div id="user-profile">
                            <!-- You can include user profile information here -->
                        </div>
                        <div class="post-content">
                            <p>${postContent.content}</p>
                        </div>
                    `;
                    container.appendChild(post);
                });
            })
            .catch(error => console.error("Error loading tweets:", error));
    });

    function postTweet() {
    const tweetContent = document.getElementById("tweetContent").value;

    fetch("http://localhost:3000/api/docs", {
        method: "POST",
        headers: {
            "Content-Type": "application/json",
        },
        body: JSON.stringify({ content: tweetContent })
    })
    .then(response => {
        if (!response.ok) {
            throw new Error(`HTTP error! Status: ${response.status}`);
        }
        return response.json();
    })
    .then(data => {
        const container = document.getElementById("container");
        const post = document.createElement("div");
        post.classList.add("post");
        post.innerHTML = `
            <div id="user-profile">
                <!-- You can include user profile information here -->
            </div>
            <div class="post-content">
                <p>${data.post.content}</p>
            </div>
        `;
        container.appendChild(post);

        document.getElementById("tweetContent").value = '';
    })
    .catch(error => console.error("Error posting tweet:", error));
}

</script>


</body>
</html>
